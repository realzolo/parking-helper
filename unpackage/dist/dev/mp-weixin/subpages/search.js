(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["subpages/search"],{141:function(t,e,n){"use strict";(function(t){n(5);r(n(3));var e=r(n(142));function r(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n(1)["createPage"])},142:function(t,e,n){"use strict";n.r(e);var r=n(143),a=n(145);for(var u in a)"default"!==u&&function(t){n.d(e,t,(function(){return a[t]}))}(u);n(148),n(150);var c,i=n(11),o=Object(i["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,"4d02f5f5",null,!1,r["components"],c);o.options.__file="subpages/search.vue",e["default"]=o.exports},143:function(t,e,n){"use strict";n.r(e);var r=n(144);n.d(e,"render",(function(){return r["render"]})),n.d(e,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(e,"components",(function(){return r["components"]}))},144:function(t,e,n){"use strict";var r;n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return c})),n.d(e,"recyclableRender",(function(){return u})),n.d(e,"components",(function(){return r}));var a=function(){var t=this,e=t.$createElement;t._self._c},u=!1,c=[];a._withStripped=!0},145:function(t,e,n){"use strict";n.r(e);var r=n(146),a=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);e["default"]=a.a},146:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(25)),a=n(147);function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,r,a,u,c){try{var i=t[u](c),o=i.value}catch(s){return void n(s)}i.done?e(o):Promise.resolve(o).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var u=t.apply(e,n);function i(t){c(u,r,a,i,o,"next",t)}function o(t){c(u,r,a,i,o,"throw",t)}i(void 0)}))}}var o={data:function(){return{areaList:a.areaList,showAreaList:!1,district:"",adcode:0,pcd:"",page:1,inputData:"",carports:[],myLocation:{}}},onLoad:function(){var t=this;return i(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.init();case 2:return e.next=4,t.doSearch();case 4:case"end":return e.stop()}}),e)})))()},methods:{init:function(){var t=this;return i(r.default.mark((function e(){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getLocation();case 2:case"end":return e.stop()}}),e)})))()},getLocation:function(){var e=this;return i(r.default.mark((function n(){var a,u,c,i,o,s,d,f,l,p,h,v,m;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getLocation({type:"gcj02",cacheTimeout:360,accuracy:"best",isHighAccuracy:!0});case 2:if(a=n.sent,u=a[1],c=u.errMsg,i=u.longitude,o=u.latitude,"getLocation:ok"==c){n.next=7;break}return e.$notify({type:"danger",message:"定位失败！请检查位置服务是否正常。"}),n.abrupt("return");case 7:return n.next=9,t.request({url:"https://apis.map.qq.com/ws/geocoder/v1",data:{key:"FLQBZ-67GCW-7SHRW-OOOZQ-WCJA5-W3B2X",location:"".concat(o,",").concat(i)}});case 9:if(a=n.sent,s=a[1].data,d=s.status,f=s.result,0==d){n.next=14;break}return e.$notify({type:"danger",message:"定位失败！请检查位置服务是否正常。"}),n.abrupt("return");case 14:l=f.ad_info.adcode,p=f.address_component,h=p.province,v=p.city,m=p.district,e.adcode=l,e.pcd=h+v+m,e.district=m;case 19:case"end":return n.stop()}}),n)})))()},doRequestSearch:function(e,n){var a=this;return i(r.default.mark((function u(){var c,i,o,s;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.request({url:"https://apis.map.qq.com/ws/place/v1/search",data:{keyword:"停车",boundary:"nearby(".concat(n,",").concat(e,",1000,1)"),orderby:"_distance",key:"FLQBZ-67GCW-7SHRW-OOOZQ-WCJA5-W3B2X"}});case 2:if(c=r.sent,i=c[1].data,o=i.status,s=i.data,0==o){r.next=7;break}return a.$notify({type:"danger",message:"请求数据失败！请检查网络是否正常。"}),r.abrupt("return");case 7:a.carports=[],s.forEach((function(t){a.carports.push({title:t.title,longitude:t.location.lng,latitude:t.location.lat,address:t.address})}));case 9:case"end":return r.stop()}}),u)})))()},parseAddress:function(e){var n=this;return i(r.default.mark((function a(){var u,c,i,o,s,d,f,l,p,h,v;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e!=n.tempAddress){r.next=2;break}return r.abrupt("return",n.carport.location);case 2:return r.next=4,t.request({url:"https://apis.map.qq.com/ws/geocoder/v1",data:{key:"FLQBZ-67GCW-7SHRW-OOOZQ-WCJA5-W3B2X",address:e}});case 4:if(u=r.sent,c=u[1].data,i=c.status,o=c.result,0==i){r.next=8;break}return r.abrupt("return");case 8:return s=o.location,d=o.address_components,f=s.lng,l=s.lat,p=d.province,h=d.city,v=d.district,r.abrupt("return",{longitude:f,latitude:l,province:p,city:h,district:v});case 12:case"end":return r.stop()}}),a)})))()},doSearch:function(){var t=this;return i(r.default.mark((function e(){var n,a,u,c;return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.pcd+t.inputData,e.next=3,t.parseAddress(n);case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return");case 6:return u=a.longitude,c=a.latitude,e.next=9,t.doRequestSearch(u,c);case 9:case"end":return e.stop()}}),e)})))()},onSearch:function(){this.showAreaList=!0},onSelect:function(){this.showAreaList=!0},onSelectConfirm:function(t){var e=t.detail.values,n="";e.forEach((function(t){n+=t.name})),this.city=e[0].name,this.pcd=n,this.showAreaList=!1},onSelectCancel:function(){this.showAreaList=!1},bindingData:function(t){this.inputData=t.detail},queryRoute:function(e){requirePlugin("routePlan");var n="FLQBZ-67GCW-7SHRW-OOOZQ-WCJA5-W3B2X",r="quick-park",a=JSON.stringify({name:e.title,navigation:1,latitude:e.latitude,longitude:e.longitude});t.navigateTo({url:"plugin://routePlan/index?key="+n+"&referer="+r+"&endPoint="+a})}}};e.default=o}).call(this,n(1)["default"])},148:function(t,e,n){"use strict";n.r(e);var r=n(149),a=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);e["default"]=a.a},149:function(t,e,n){},150:function(t,e,n){"use strict";n.r(e);var r=n(151),a=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,(function(){return r[t]}))}(u);e["default"]=a.a},151:function(t,e,n){}},[[141,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../.sourcemap/mp-weixin/subpages/search.js.map